!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("angular-cd-timer",["exports","@angular/core"],e):e((t=t||self)["angular-cd-timer"]={},t.ng.core)}(this,(function(t,e){"use strict";var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}},s=function(){function t(t,i){this.elt=t,this.renderer=i,this.onStart=new e.EventEmitter,this.onStop=new e.EventEmitter,this.onTick=new e.EventEmitter,this.onComplete=new e.EventEmitter,this.autoStart=!0,this.startTime=0,this.endTime=0,this.timeoutId=null,this.countdown=!1,this.format="default"}return t.prototype.ngAfterViewInit=function(){var t=this.elt.nativeElement.lastChild;this.ngContentSchema=t?t.nodeValue:"",void 0!==this.autoStart&&!0!==this.autoStart||this.start()},t.prototype.ngOnDestroy=function(){this.resetTimeout()},t.prototype.start=function(){this.initVar(),this.resetTimeout(),this.computeTimeUnits(),this.startTickCount(),this.onStart.emit(this)},t.prototype.resume=function(){this.resetTimeout(),this.startTickCount()},t.prototype.stop=function(){this.clear(),this.onStop.emit(this)},t.prototype.reset=function(){this.initVar(),this.resetTimeout(),this.clear(),this.computeTimeUnits(),this.renderText()},t.prototype.get=function(){return{seconds:this.seconds,minutes:this.minutes,hours:this.hours,days:this.days,timer:this.timeoutId,tick_count:this.tickCounter}},t.prototype.initVar=function(){this.startTime=this.startTime||0,this.endTime=this.endTime||0,this.countdown=this.countdown||!1,this.tickCounter=this.startTime,this.countdown&&0===this.startTime&&(this.countdown=!1),this.format||(this.format=this.ngContentSchema.length>5?"user":"default")},t.prototype.resetTimeout=function(){this.timeoutId&&clearInterval(this.timeoutId)},t.prototype.renderText=function(){var t,e,s;if("user"===this.format){var o={seconds:this.seconds,minutes:this.minutes,hours:this.hours,days:this.days};s=this.ngContentSchema;try{for(var n=i(Object.keys(o)),r=n.next();!r.done;r=n.next()){var h=r.value;s=s.replace("["+h+"]",o[h].toString())}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}}else"intelli"===this.format?(s="",this.days>0&&(s+=this.days.toString()+"day"+(this.days>1?"s":"")+" "),(this.hours>0||this.days>0)&&(s+=this.hours.toString()+"h "),(this.minutes>0||this.hours>0)&&0===this.days&&(s+=this.minutes.toString().padStart(2,"0")+"min "),0===this.hours&&0===this.days&&(s+=this.seconds.toString().padStart(2,"0")+"s")):"hms"===this.format?(s=this.hours.toString().padStart(2,"0")+":",s+=this.minutes.toString().padStart(2,"0")+":",s+=this.seconds.toString().padStart(2,"0")):(s=this.days.toString()+"d ",s+=this.hours.toString()+"h ",s+=this.minutes.toString()+"m ",s+=this.seconds.toString()+"s");this.renderer.setProperty(this.elt.nativeElement,"innerHTML",s)},t.prototype.clear=function(){this.resetTimeout(),this.timeoutId=null},t.prototype.computeTimeUnits=function(){this.maxTimeUnit&&"day"!==this.maxTimeUnit?"second"===this.maxTimeUnit?(this.seconds=this.tickCounter,this.minutes=0,this.hours=0,this.days=0):"minute"===this.maxTimeUnit?(this.seconds=Math.floor(this.tickCounter%60),this.minutes=Math.floor(this.tickCounter/60),this.hours=0,this.days=0):"hour"===this.maxTimeUnit&&(this.seconds=Math.floor(this.tickCounter%60),this.minutes=Math.floor(this.tickCounter/60%60),this.hours=Math.floor(this.tickCounter/3600),this.days=0):(this.seconds=Math.floor(this.tickCounter%60),this.minutes=Math.floor(this.tickCounter/60%60),this.hours=Math.floor(this.tickCounter/3600%24),this.days=Math.floor(this.tickCounter/3600/24)),this.renderText()},t.prototype.startTickCount=function(){var t=this;t.timeoutId=setInterval((function(){var e;t.countdown?(e=t.tickCounter,t.startTime>t.endTime&&(e=t.tickCounter-t.endTime-1)):(e=t.tickCounter-t.startTime,t.endTime>t.startTime&&(e=t.endTime-t.tickCounter-1)),t.computeTimeUnits();var i={seconds:t.seconds,minutes:t.minutes,hours:t.hours,days:t.days,timer:t.timeoutId,tick_count:t.tickCounter};if(t.onTick.emit(i),e<0)return t.stop(),void t.onComplete.emit(t);t.countdown?t.tickCounter--:t.tickCounter++}),1e3)},t.decorators=[{type:e.Component,args:[{selector:"cd-timer",template:" <ng-content></ng-content>"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2}]},t.propDecorators={startTime:[{type:e.Input}],endTime:[{type:e.Input}],countdown:[{type:e.Input}],autoStart:[{type:e.Input}],maxTimeUnit:[{type:e.Input}],format:[{type:e.Input}],onStart:[{type:e.Output}],onStop:[{type:e.Output}],onTick:[{type:e.Output}],onComplete:[{type:e.Output}]},t}();var o=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[s],imports:[],exports:[s]}]}],t}();t.CdTimerComponent=s,t.CdTimerModule=o,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-cd-timer.umd.min.js.map